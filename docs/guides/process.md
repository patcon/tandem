# Process

This should contain guides around the Tandem process, specifically around project and product lifecycles.

## Contributing Code

1.  Choose a ticket or issue from the [ZenHub board](https://github.com/thinktandem/horoscope#boards?repos=88304447) of the project you are working on.
2. Make sure you start the Harvest Time Tracker for the issue: ![Harvest time tracker image](/images/harvest-time-tracking.png "Harvest Time Tracker")
3. Take a look at the issue. If you have any unresolved questions, reach out to your project manager.
4.  Open a new branch from `master` in the form `ISSUENUMBER-BRIEFDESCRIPTION` to work on that issue
5.  Add commits to this branch with message form `#ISSUENUMBER: COMMIT DESCRIPTION`
6.  Push the `git push {REMOTE} {ISSUENUMBER-BRIEFDESCRIPTION}` when work is complete
7.  [Open a pull request](https://help.github.com/articles/creating-a-pull-request/)

* Before opening a PR
  * Run the tests locally: `lando composer test`
  * Test manually that the functionality described in the task is complete.
  * Run `git diff` on your code and make sure debug, testing and cruft is removed
  from the proposed PR code.
* Assign the PR to be reviewed by your project manager.

1.  Follow any checklists that are auto-generated by the pull request
2.  Wait for any automated tests (Travis-CI/CircleCI), or manual QA (platform envs, code review) to pass.
3.  Merge the code into `master`. * This is typically done by a technical project lead.
4.  Delete the issue branch `ISSUENUMBER-BRIEFDESCRIPTION`. * This is typically done by a technical project lead.

**NEVER EVER EVER EVER PUSH ANYTHING DIRECTLY TO THE MASTER BRANCH!!!**

Some details may vary on a project to project basis. Every project has a its own documentation typically starting with the README.md and project variances in process will be documented there.  For example for projects using Platform.sh as the host in step 2 you would branch from `test` as `test` is the canonical branch for Platform.sh based projects, where Pantheon uses `master` as canonical.

## QAing Code

These are all the GitHub PR based QA mechanism that we use

### GitHub Based Manual Code Review

After working on a feature linked to an issue.

* Push up your feature branch and file a Pull Request (PR)
* Assign the PR to your deploy lead
* The deploy lead will look at the PR either:
  * Approve and merge it to `test` for client QA from there the deploy will handle getting the feature to production
  * Find some issues or improvements that can be made; then
    * These findings can be discussed in daily project standup to determine next action steps
    * Findings requests for remediation can be made in text against the PR and developer takes action on them

### QA Environments

* Each feature branch that is filed as a PR spins up a QA environment on Platform.sh
* Once you file the PR
  * Update the GitHub issue
    * Paste in the PR URL
    * Paste in the Platform.sh QA env URL
    * Describe what the feature does
      * If special steps are required for testing/review indicate them
    * Assign to a team deploy lead
    * Move issue card on ZenHub to the Needs Review / Ready for QA column geoff

### Automated Travis/Circle Testing

* Linting/Code Standards
  * For Drupal projects we follow the [Drupal Coding Standards](https://www.drupal.org/docs/develop/standards/coding-standards)
  * For Laravel and PHP we follow [PSR2 Standard](http://www.php-fig.org/psr/psr-2/)
  * For NodeJS we follow [Node.js Style Guide](https://github.com/felixge/node-style-guide)
* Unit Testing
* Functional testing
* Tests can and should be run locally and clean up any outstanding issues reported
  * This can usually be done with `lando composer test`
  * In the event that you file a PR and it does not pass tests.  Take the initiative to fix it up and push up the cleaned up code

### In-Development QA mechanisms

* Peer review
  * If you are unsure of requirements, best path forward, or you find yourself in a rabbit hole reach out to another developer on the team to get plan and a path forward
* Pair programming
  * If you are working on a new tech stack or new problem you might choose to pair up and work on a problem together
